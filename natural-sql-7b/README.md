# NaturalSQL-7B Model

Welcome to the `natural-sql-7b` model documentation. This model is part of the NaturalSQL series by ChatDB, designed to generate SQL queries from natural language questions with state-of-the-art performance.

## Overview

The `natural-sql-7b` model showcases exceptional ability in generating correct SQL queries on novel schemas. It is benchmarked using the SQL-Eval framework and excels in understanding complex query intentions.

## Setup and Dependencies

To use the `natural-sql-7b` model, ensure you have the following dependencies installed:

```bash
pip install transformers==4.35.2 accelerate sqlparse
```

## Model Loading

You can load the model using the following Python code:

```python
import torch
from transformers import AutoModelForCausalLM, AutoTokenizer

tokenizer = AutoTokenizer.from_pretrained("chatdb/natural-sql-7b")
model = AutoModelForCausalLM.from_pretrained(
    "chatdb/natural-sql-7b",
    device_map="auto",
    torch_dtype=torch.float16,
)
```

## Generating SQL Queries

To generate SQL queries for a list of questions, use the following code structure:

```python
questions = ['Your question here']
for question in questions:
    # Generate prompt and process with the model
    # Outputs will contain the generated SQL queries
```

### Example SQL Query

An example SQL query generated by the model is:

```sql
SELECT created_at::date AS join_date, COUNT(*) AS user_count
FROM users
GROUP BY join_date
ORDER BY user_count DESC
LIMIT 1;
```

## Deploying

Ensure you have a Baseten account and API key for deployment. Install the latest version of Truss and use the `truss push` command within your working directory to deploy the model.

## Licensing

- The repository code is licensed under `apache-2.0`.
- The model license is `CC BY-SA 4.0`.

For more detailed information on deployment and usage, refer to the Truss documentation and the Baseten platform.
